{{ range $validatorIndex, $proxyCount := .Values.geth.proxiesPerValidator }}
{{ include "celo.full-node-statefulset" (dict "Values" $.Values "Release" $.Release "Chart" $.Chart "name" (print "validators-" $validatorIndex "-proxy") "component_label" "proxy" "mnemonic_account_type" "proxy" "replicas" $proxyCount "proxy" true "proxy_allow_private_ip_flag" true "unlock" true "expose" false "rpc_apis" "eth,net,web3" "syncmode" "full" "gcmode" "full" "service_ip_env_var_prefix" (printf "%s%s%d%s" ($.Release.Namespace | upper) "_VALIDATORS_" $validatorIndex "_PROXY_INTERNAL_") "validator_index" $validatorIndex "ip_addresses" (include "celo.proxyipaddresses" (dict "Values" $.Values "validatorIndex" $validatorIndex) )) }}
---
{{ end }}
