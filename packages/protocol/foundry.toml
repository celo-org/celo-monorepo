[profile.default]
src = 'contracts-0.8'
out = 'out'
ast = true
test = 'test-sol'
libs = ['lib', 'node_modules']
optimizer = true

no_match_test = "skip"

# 1. `BLS12Passthrough.sol` is excluded, because it's tested in the celo-blockain repo as described here: https://github.com/celo-org/celo-monorepo/pull/10240
# 2. `Random.sol` is excluded, but I'm not sure why. It was already excluded so I'm leaving it here.
# 3. `test-sol/devchain/` tests are excluded because they require an anvil devchain to be serving at a localhost
# Helper: Test glob patterns here: https://globster.xyz/
no_match_path = "{**/test/BLS12Passthrough.sol,**/test/RandomTest.sol,**/test-sol/devchain/**}"

fs_permissions = [
  { access = "read", path = "./out"},
  { access = "read", path = "./migrations_sol/migrationsConfig.json"},
  { access = "read", path = "./migrations_sol/"},
  { access = "read", path = "./governanceConstitution.json"},
  { access = "read", path = "./artifacts/"},
  { access = "read", path = "./.tmp/selectors" }
]

[profile.devchain] # Special profile for the tests that require an anvil devchain
test = 'test-sol/devchain'
match_path = "**/test-sol/devchain/**"
no_match_path = "{**/test/BLS12Passthrough.sol,**/test/RandomTest.sol}"

# Profile to match Truffle configuration for 0.5.13 contracts
[profile.truffle-compat]
src = 'contracts'
out = 'out-truffle-compat'
libs = ['lib', 'node_modules']
solc_version = '0.5.13'
optimizer = false
evm_version = 'istanbul'
metadata_literal = true
via_ir = false

# Profile to match Truffle configuration for 0.8.19 contracts
[profile.truffle-compat8]
src = 'contracts-0.8'
out = 'out-truffle-compat-0.8'
libs = ['lib', 'node_modules']
solc_version = '0.8.19'
optimizer = true
optimizer_runs = 200
use_literal_content = true
via_ir = false
evm_version = 'paris'
bytecode_hash = 'ipfs'
cbor_metadata = true
# See more config options https://github.com/foundry-rs/foundry/tree/master/crates/config
