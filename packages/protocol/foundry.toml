[profile.default]
src = 'contracts-0.8'
out = 'out'
test = 'test-sol'
libs = ['lib', 'node_modules']
evm_version = "cancun"
remappings = [
    '@celo-contracts/=contracts/',
    '@celo-contracts-8=contracts-0.8/',
    '@mento-core/=lib/mento-core',
    'openzeppelin-solidity/=lib/openzeppelin-contracts/',
    '@openzeppelin/contracts8/=lib/openzeppelin-contracts8/contracts/',
    'celo-foundry/=lib/celo-foundry/src/',
    'celo-foundry-8/=lib/celo-foundry-8/src/',
    '@test-sol/=test-sol/',
    '@migrations-sol/=migrations_sol/',
    'forge-std/=lib/celo-foundry/lib/forge-std/src/',
    'forge-std-8/=lib/celo-foundry-8/lib/forge-std/src/',
    '@summa-tx/memview.sol/=lib/memview.sol',
    'solidity-bytes-utils/=lib/solidity-bytes-utils/',
    'solidity-bytes-utils-8/=lib/solidity-bytes-utils-8/',
    'ds-test/=lib/celo-foundry/lib/forge-std/lib/ds-test/src/',
    'transient-goodies/=lib/transient-goodies/',
]

no_match_test = "skip"

# 1. `BLS12Passthrough.sol` is excluded, because it's tested in the celo-blockain repo as described here: https://github.com/celo-org/celo-monorepo/pull/10240
# 2. `Random.sol` is excluded, but I'm not sure why. It was already excluded so I'm leaving it here.
# 3. `test-sol/devchain/` tests are excluded because they require an anvil devchain to be serving at a localhost
# Helper: Test glob patterns here: https://globster.xyz/
no_match_path = "{**/test/BLS12Passthrough.sol,**/test/RandomTest.sol,**/test-sol/devchain/**}"

fs_permissions = [
    { access = "read", path = "./out"},
    { access = "read", path = "./migrations_sol/migrationsConfig.json"},
    { access = "read", path = "./governanceConstitution.json"},
    { access = "read", path = "./artifacts/"}
    ]

[profile.devchain] # Special profile for the tests that require an anvil devchain
test = 'test-sol/devchain'
match_path = "**/test-sol/devchain/**"
no_match_path = "{**/test/BLS12Passthrough.sol,**/test/RandomTest.sol}"

# See more config options https://github.com/foundry-rs/foundry/tree/master/config
