name: celo-monorepo
run-name: celo-monorepo tests

# Dockefile for the self-hosted runner: 
# https://github.com/celo-org/infrastructure/blob/master/terraform/root-modules/gcp/integration-tests-gke/files/github-arc/Dockerfile-monorepo

on:
  push:
    branches:
      - master
  pull_request:
    branches:
      - master

concurrency:
  group: circle-ci-${{ github.ref }}
  cancel-in-progress: true

defaults:
  run:
    shell: bash --login -eo pipefail {0}

jobs:
  install-dependencies:
    name: Install dependencies
    runs-on: ["self-hosted", "monorepo", "npm"]
    timeout-minutes: 30
    steps:
      - name: Test
        run: |
          curl icanhazip.com
